---
title: "gDRtestData"
author: "gDR team"
output: BiocStyle::html_document
vignette: >
  %\VignetteIndexEntry{gDRtestData}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r, echo=FALSE}
library(gDRtestData)
```

# Overview

The `gDRtestData` package is intended to store and generate example data that can be used through the `gDR` suite.

# Use Cases

## Synthetic data generation

Since `gDR`is a computational suite for drug response data from any experiment, a synthetic dataset is also needed for testing and exploration purposes. 

The basis of everything are two functions to generate the synthetic sets of cell lines and drugs.

```{r}
cell_lines <- create_synthetic_cell_lines()
head(cell_lines)

drugs <- create_synthetic_drugs()
head(drugs)
```

These base sets can be extended with additional information.

1. Replicates

```{r}
cl_rep <- add_data_replicates(cell_lines)
head(cl_rep)
```

2. Concentration

```{r}
cl_con <- add_concentration(cell_lines)
head(cl_con)
```

Or the user can do both with one function:

```{r}
base_data <- prepareData(cell_lines, drugs)
head(base_data)
```

In further step the user may generate set of synthetic results:

1. Hill coefficient
```{r}
hill <- generate_hill_coef(cell_lines, drugs) 
```

2. EC50 metric
```{r}
ec50_met <- generate_ec50(cell_lines, drugs) 
```

3. E inf metric
```{r}
einf_met <- generate_e_inf(cell_lines, drugs)
```

Or the user can create full response data with one fucntion:

```{r}
df_layout <- prepareData(cell_lines[seq_len(2), ], drugs[seq_len(4), ])
response_data <- generate_response_data(df_layout)
head(response_data)
```

Additional, the user may fill the full response data with the day 0 part

```{r}
merge_dt <- prepareData(cell_lines[seq_len(2), ], drugs[seq_len(4), ])
merge_dt$Duration <- 72
merge_dt$ReadoutValue <- 0
merge_dt_withDay0 <- add_day0_data(merge_dt)
head(merge_dt_withDay0)
```

The user can create synthetic raw data

```{r}
raw_data <- prepareData(create_synthetic_cell_lines(), create_synthetic_drugs())
```


## Synthetic object of gDR data model

The gDR data model is built on the MultiAssayExperiments (MAE) structure. Detailed description of gDR data model may be found in gDRcore package vignette. 

In `inst/testdata` the user may find a set of `qs` file that are example of gDR data model for different data type. In file `synthetic_list.yml` maybe be found list of these datasets.devt

In `inst/scripts` you can find a script `generate_example_data.R` showing how to generate and process above mentioned datasets.
All key functions may be found in package `gDRcore` in script `generate_wrappers.R`. 


## Annotation data

In `inst/annotation_data` the user may find `csv` files that are used in `gDRcore` for test of annotation functions.

## Other

Other files which were not mentioned above are used for testing gDR suite functionality.

# SessionInfo {-}

```{r sessionInfo}
sessionInfo()
```
